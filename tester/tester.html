<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Panel de Resultados - Compilador R-Info</title>
    <!-- CodeMirror CSS -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.2/codemirror.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.2/theme/dracula.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.2/theme/eclipse.min.css">

    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        body {
            background: linear-gradient(135deg, #1e3c72, #2a5298);
            color: #333;
            min-height: 100vh;
            padding: 20px;
        }

        .compiler-panel {
            max-width: 1400px;
            margin: 0 auto;
            background: white;
            border-radius: 12px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
            overflow: hidden;
        }

        .panel-header {
            background: linear-gradient(135deg, #2c3e50, #4a6491);
            color: white;
            padding: 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .panel-header h1 {
            font-size: 24px;
            font-weight: 600;
        }

        .status-indicator {
            display: flex;
            align-items: center;
            gap: 10px;
            padding: 8px 16px;
            border-radius: 20px;
            font-weight: 500;
        }

        .status-success {
            background: rgba(46, 204, 113, 0.2);
            color: #27ae60;
            border: 1px solid #27ae60;
        }

        .status-error {
            background: rgba(231, 76, 60, 0.2);
            color: #c0392b;
            border: 1px solid #c0392b;
        }

        .status-icon {
            width: 12px;
            height: 12px;
            border-radius: 50%;
        }

        .status-success .status-icon {
            background: #27ae60;
        }

        .status-error .status-icon {
            background: #c0392b;
        }

        .BtnNav {
            background-color: #0e639c;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 14px;
            transition: background-color 0.2s;
            font-weight: 500;
        }

        .BtnNav:hover {
            background-color: #1177bb;
        }

        /* Estilos para el editor */
        .VentanaPrincipal {
            display: flex;
            flex-direction: column;
            gap: 0;
        }

        .VentanaInteraccion {
            flex: 1;
            display: flex;
            flex-direction: column;
            background-color: #252526;
            overflow: hidden;
        }

        .editor-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 12px 20px;
            background: #2d2d2d;
            border-bottom: 1px solid #3e3e3e;
        }

        .nombre-programa {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .nombre-programa label {
            font-size: 14px;
            color: #d4d4d4;
            white-space: nowrap;
        }

        .nombre-programa input {
            padding: 6px 10px;
            border: 1px solid #3e3e3e;
            border-radius: 4px;
            font-size: 14px;
            width: 180px;
            background: #3c3c3c;
            color: #d4d4d4;
        }

        .editor-options {
            display: flex;
            gap: 10px;
            align-items: center;
        }

        .editor-btn {
            background-color: #3c3c3c;
            color: #d4d4d4;
            border: 1px solid #3e3e3e;
            padding: 8px 15px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 14px;
            transition: all 0.3s;
        }

        .editor-btn:hover {
            background-color: #4c4c4c;
        }

        .editor-container {
            display: flex;
            flex: 1;
            overflow: hidden;
            position: relative;
        }

        .line-numbers {
            background-color: #2d2d2d;
            color: #858585;
            padding: 10px 8px;
            text-align: right;
            font-size: 14px;
            line-height: 1.5;
            user-select: none;
            overflow: hidden;
            width: 60px;
            flex-shrink: 0;
            font-family: 'Consolas', 'Monaco', 'Courier New', monospace;
        }

        .CodeMirror {
            flex: 1;
            height: auto !important;
            font-family: 'Consolas', 'Monaco', 'Courier New', monospace;
            font-size: 15px;
            line-height: 1.5;
        }

        .status-bar {
            background-color: #007acc;
            color: white;
            padding: 8px 15px;
            font-size: 13px;
            display: flex;
            justify-content: space-between;
            flex-shrink: 0;
        }

        /* Estilos para el panel de resultados */
        .panel-content {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            padding: 20px;
            background: #f5f7fa;
        }

        @media (max-width: 1024px) {
            .panel-content {
                grid-template-columns: 1fr;
            }
        }

        .section {
            background: #ffffff;
            border-radius: 8px;
            padding: 20px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.05);
            border: 1px solid #e1e5e9;
        }

        .section h2 {
            font-size: 18px;
            margin-bottom: 15px;
            padding-bottom: 10px;
            border-bottom: 2px solid #e9ecef;
            color: #2c3e50;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .section h2 i {
            font-size: 20px;
        }

        .summary-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 15px;
        }

        .summary-item {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 6px;
            text-align: center;
            border: 1px solid #e9ecef;
        }

        .summary-value {
            font-size: 24px;
            font-weight: 700;
            color: #2c3e50;
            margin-bottom: 5px;
        }

        .summary-label {
            font-size: 14px;
            color: #6c757d;
        }

        .process-list, .variable-list, .area-list, .error-list, .process-call-list {
            max-height: 300px;
            overflow-y: auto;
        }

        .process-item, .variable-item, .area-item, .error-item {
            background: #f8f9fa;
            padding: 15px;
            margin-bottom: 10px;
            border-radius: 6px;
            border: 1px solid #e9ecef;
        }

        .process-name, .variable-name, .area-name {
            font-weight: 600;
            color: #2c3e50;
            margin-bottom: 8px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .process-details, .variable-details, .area-details {
            font-size: 14px;
            color: #6c757d;
        }

        .param-list, .dimension-list {
            margin-top: 8px;
            padding-left: 20px;
        }

        .param-item, .dimension-item {
            display: flex;
            justify-content: space-between;
            padding: 4px 0;
            border-bottom: 1px solid #e9ecef;
        }

        .param-item:last-child, .dimension-item:last-child {
            border-bottom: none;
        }

        .error-item {
            border-left: 4px solid #e74c3c;
            background: #fff5f5;
        }

        .error-message {
            color: #c0392b;
            font-weight: 500;
        }

        .empty-state {
            text-align: center;
            padding: 30px;
            color: #95a5a6;
            font-style: italic;
        }

        .executable-section {
            grid-column: 1 / -1;
        }

        .code-block {
            background: #2c3e50;
            color: #ecf0f1;
            padding: 15px;
            border-radius: 6px;
            font-family: 'Courier New', monospace;
            font-size: 14px;
            max-height: 300px;
            overflow-y: auto;
            white-space: pre-wrap;
        }

        .toggle-button {
            background: #3498db;
            color: white;
            border: none;
            padding: 8px 15px;
            border-radius: 4px;
            cursor: pointer;
            font-weight: 500;
            transition: background 0.3s;
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .toggle-button:hover {
            background: #2980b9;
        }

        .hidden {
            display: none;
        }

        .section-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }

        .process-call-item {
            background: #f8f9fa;
            padding: 12px;
            margin-bottom: 8px;
            border-radius: 6px;
            border: 1px solid #e9ecef;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .call-valid {
            border-left: 4px solid #27ae60;
        }

        .call-invalid {
            border-left: 4px solid #e74c3c;
        }

        .valid-badge {
            padding: 4px 8px;
            border-radius: 12px;
            font-size: 12px;
            font-weight: 500;
        }

        .valid-true {
            background: rgba(46, 204, 113, 0.2);
            color: #27ae60;
        }

        .valid-false {
            background: rgba(231, 76, 60, 0.2);
            color: #c0392b;
        }
    </style>
</head>
<body>
    <div class="compiler-panel">
        <div class="panel-header">
            <h1>Compilador R-Info - Entorno de pruebas</h1>
            <div>
                <button class="BtnNav" onclick="compilar()">Compilar</button>
                <!-- Agregar boton para regresar a la pagina principal -->
                <!--
                <div id="statusIndicator" class="status-indicator status-success">
                    <div class="status-icon"></div>
                    <span>Listo para compilar</span>
                </div>
                -->
            </div>
        </div>
        
        <main class="VentanaPrincipal" id="ventana-principal">
            <section class="VentanaInteraccion" id="editor-section">
                <div class="editor-header">
                    <div class="nombre-programa">
                        <label for="nombre-programa">Nombre del programa:</label>
                        <input type="text" id="nombre-programa" value="presentacion" placeholder="Ingresa el nombre del programa">
                    </div>
                    <div class="editor-options">
                        <button class="editor-btn" onclick="cargarCodigo()">Importar</button>
                        <button class="editor-btn" onclick="guardarCodigo()">Exportar</button>
                    </div>
                </div>
                <div class="editor-container" id="editor-container">
                    <div class="line-numbers" id="line-numbers">1</div>
                    <textarea id="seccionCodigo" style="display: none;">{Bienvenidos al entorno de pruebas del compilador de R-info. Aqui podran poner a prueba todo tipo de codigos hechos con el lenguaje de r-info , para que el compilado del entorno pueda procesarlo y visualizar los aspectos del compilador en parte a su correcto desempe√±o}
</textarea>
                </div>
                <div class="status-bar">
                    <span id="cursor-position">Ln 1, Col 1</span>
                    <span id="file-info">R-Info</span>
                    <span id="code-stats">0 palabras, 0 l√≠neas</span>
                </div>
            </section>
        </main>

        <div class="panel-content">
            <!-- Resumen General -->
            <div class="section">
                <h2><i>üìä</i> Resumen General</h2>
                <div class="summary-grid">
                    <div class="summary-item">
                        <div class="summary-value" id="totalProcesses">0</div>
                        <div class="summary-label">Procesos</div>
                    </div>
                    <div class="summary-item">
                        <div class="summary-value" id="totalProcessCalls">0</div>
                        <div class="summary-label">Llamadas</div>
                    </div>
                    <div class="summary-item">
                        <div class="summary-value" id="totalVariables">0</div>
                        <div class="summary-label">Variables</div>
                    </div>
                    <div class="summary-item">
                        <div class="summary-value" id="totalErrors">0</div>
                        <div class="summary-label">Errores</div>
                    </div>
                </div>
            </div>
            
            <!-- Procesos Declarados -->
            <div class="section">
                <div class="section-header">
                    <h2><i>‚öôÔ∏è</i> Procesos Declarados</h2>
                </div>
                <div class="process-list" id="processList">
                    <div class="empty-state">Compile el c√≥digo para ver los procesos</div>
                </div>
            </div>
            
            <!-- Llamadas a Procesos -->
            <div class="section">
                <div class="section-header">
                    <h2><i>üìû</i> Llamadas a Procesos</h2>
                </div>
                <div class="process-call-list" id="processCallList">
                    <div class="empty-state">Compile el c√≥digo para ver las llamadas</div>
                </div>
            </div>
            
            <!-- Variables Principales -->
            <div class="section">
                <div class="section-header">
                    <h2><i>üìù</i> Variables Principales</h2>
                </div>
                <div class="variable-list" id="variableList">
                    <div class="empty-state">Compile el c√≥digo para ver las variables</div>
                </div>
            </div>
            
            <!-- √Åreas Declaradas -->
            <div class="section">
                <div class="section-header">
                    <h2><i>üó∫Ô∏è</i> √Åreas Declaradas</h2>
                </div>
                <div class="area-list" id="areaList">
                    <div class="empty-state">Compile el c√≥digo para ver las √°reas</div>
                </div>
            </div>
            
            <!-- Errores de Compilaci√≥n -->
            <div class="section">
                <div class="section-header">
                    <h2><i>‚ùå</i> Errores de Compilaci√≥n</h2>
                </div>
                <div class="error-list" id="errorList">
                    <div class="empty-state">No hay errores</div>
                </div>
            </div>
            
            <!-- C√≥digo Ejecutable -->
            <div class="section executable-section">
                <div class="section-header">
                    <h2><i>ü§ñ</i> C√≥digo Ejecutable Generado</h2>
                    <button class="toggle-button" id="toggleExecutable">
                        <span>Mostrar</span> <i>‚ñº</i>
                    </button>
                </div>
                <div class="code-block hidden" id="executableCode">
                    <!-- El c√≥digo ejecutable se mostrar√° aqu√≠ -->
                </div>
            </div>
        </div>
    </div>

    <!-- CodeMirror JS -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.2/codemirror.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.2/addon/edit/matchbrackets.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.2/addon/edit/closebrackets.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.2/addon/comment/comment.min.js"></script>
    
    <!-- Codigo JS -->
    <script src="../compilador/lexer.js"></script>
    <script src="../compilador/parser.js"></script>
    <script src="../compilador/semantic.js"></script>

    <script>
        // Variables globales
        let codeEditor;

        // Inicializar CodeMirror
        function inicializarEditor() {
            codeEditor = CodeMirror.fromTextArea(document.getElementById('seccionCodigo'), {
                mode: "rinfo",
                theme: "dracula",
                lineNumbers: false,
                indentUnit: 4,
                indentWithTabs: false,
                lineWrapping: true,
                autoCloseBrackets: true,
                matchBrackets: true,
                extraKeys: {
                    "Tab": function(cm) {
                        cm.replaceSelection("    ", "end");
                    },
                    "Ctrl-S": function(cm) {
                        guardarCodigo();
                    },
                    "Ctrl-O": function(cm) {
                        cargarCodigo();
                    },
                    "Ctrl-F": function(cm) {
                        // autoFormatear();
                    },
                    "Ctrl-/": function(cm) {
                        // toggleComment();
                    }
                }
            });
            
            // Configurar el editor
            codeEditor.setSize("100%", "100%");
            
            // Eventos para actualizar interfaz
            codeEditor.on("change", function() {
                updateLineNumbers();
                updateCodeStats();
            });
            
            codeEditor.on("cursorActivity", function() {
                updateCursorPosition();
            });
            
            codeEditor.on("scroll", function() {
                const lineNumbers = document.getElementById('line-numbers');
                if (lineNumbers) {
                    lineNumbers.scrollTop = codeEditor.getScrollInfo().top;
                }
            });
            
            // Inicializar n√∫meros de l√≠nea y estad√≠sticas
            updateLineNumbers();
            updateCursorPosition();
            updateCodeStats();
        }

        // Funciones auxiliares del editor
        function updateLineNumbers() {
            const lineNumbers = document.getElementById('line-numbers');
            if (!lineNumbers) return;
            
            const lineCount = codeEditor.lineCount();
            let numbers = '';
            for (let i = 1; i <= lineCount; i++) {
                numbers += i + '<br>';
            }
            lineNumbers.innerHTML = numbers;
        }

        function updateCodeStats() {
            const codeStats = document.getElementById('code-stats');
            if (!codeStats) return;
            
            const text = codeEditor.getValue();
            const wordCount = text.trim() === '' ? 0 : text.trim().split(/\s+/).length;
            const lineCount = codeEditor.lineCount();
            codeStats.textContent = `${wordCount} palabras, ${lineCount} l√≠neas`;
        }

        function updateCursorPosition() {
            const cursorPosition = document.getElementById('cursor-position');
            if (!cursorPosition) return;
            
            const cursor = codeEditor.getCursor();
            cursorPosition.textContent = `Ln ${cursor.line + 1}, Col ${cursor.ch + 1}`;
        }

        // Funciones de compilaci√≥n
        function compilar() {
            const sourceCode = codeEditor.getValue();
            
            try {
                // 1. An√°lisis L√©xico
                const lexer = new Lexer(sourceCode);
                const tokens = lexer.tokenize();   
                        
                //  Muestra de tokens
                let tokenText = tokens.map(token => 
                `${token.type}: "${token.value}" (L√≠nea ${token.line}, Columna ${token.column})`
                ).join('\n');
                        
                console.log(tokenText);
                        

                // 2. An√°lisis Sint√°ctico
                const parser = new Parser(tokens);
                const ast = parser.parse();
                        
                console.log(ast); //resultado de parser

                // 3. An√°lisis Sem√°ntico
                const semanticAnalyzer = new SemanticAnalyzer();
                const semanticResult = semanticAnalyzer.analyze(ast);
                
                // Mostrar resultados
                if (semanticResult.errors.length > 0) { 
                    alert('Errores sem√°nticos encontrados:\n' + semanticResult.errors.join('\n'));
                    //displayErrors(semanticResult.errors);
                } else {
                    //displaySymbolTable(semanticResult.symbolTable);
                    console.log(semanticResult);
                    alert('Compilaci√≥n exitosa sin errores.');
                }

                /*
                // Por ahora usamos datos de ejemplo
                const result = {
                    symbolTable: [
                        { name: "R_info", type: "robot1", scope: "global", initialized: true }
                    ],
                    processes: [
                        {
                            name: "recorrerAvenida",
                            parameters: [
                                { direction: "E", name: "numAv", type: "numero" }
                            ],
                            variables: [],
                            bodyStatements: 3,
                            scope: "proceso:recorrerAvenida"
                        }
                    ],
                    processCalls: [
                        {
                            name: "recorrerAvenida",
                            parameters: ["1"],
                            line: 19,
                            isValid: true
                        }
                    ],
                    executable: {
                        programa: "ejemplo",
                        areas: [
                            {
                                name: "ciudad",
                                type: "AreaC",
                                dimensions: ["1", "1", "100", "100"],
                                bounds: { x1: 1, y1: 1, x2: 100, y2: 100 }
                            }
                        ],
                        robots: [
                            {
                                name: "robot1",
                                instructions: [
                                    {
                                        type: "process_call",
                                        processName: "recorrerAvenida",
                                        parameters: ["1"],
                                        line: 0
                                    }
                                ],
                                position: { x: 0, y: 0 },
                                direction: "este",
                                bag: { flores: 0, papeles: 0 },
                                active: false
                            }
                        ],
                        procesos: [
                            {
                                name: "recorrerAvenida",
                                parameters: [
                                    { direction: "E", name: "numAv", type: "numero" }
                                ],
                                instructions: [
                                    {
                                        type: "instruction",
                                        instruction: "Pos",
                                        parameters: ["numAv", "1"],
                                        line: 0
                                    },
                                    {
                                        type: "repeat",
                                        count: 99,
                                        body: [
                                            {
                                                type: "instruction",
                                                instruction: "mover",
                                                parameters: [],
                                                line: 0
                                            }
                                        ],
                                        line: 0
                                    }
                                ]
                            }
                        ],
                        main: [
                            {
                                type: "instruction",
                                instruction: "AsignarArea",
                                parameters: ["R_info", "ciudad"],
                                line: 0
                            },
                            {
                                type: "instruction",
                                instruction: "Iniciar",
                                parameters: ["R_info", "1", "1"],
                                line: 0
                            }
                        ],
                        variables: new Map([
                            ["R_info", { name: "R_info", type: "robot1", value: null }]
                        ])
                    },
                    errors: [],
                    success: true,
                    summary: {
                        totalProcesses: 1,
                        totalProcessCalls: 1,
                        validProcessCalls: 1,
                        totalErrors: 0,
                        totalVariables: 1,
                        totalRobots: 1,
                        totalAreas: 1
                    }
                };
                
                // Actualizar el panel de resultados
                updateCompilerResults(result);
                */
            } catch (error) {
                alert('Error durante la compilaci√≥n: ' + error.message);
                //updateCompilerResults(errorResult);
            }
        }

        // Funciones de archivo (placeholders)
        function guardarCodigo() {
            const codigo = codeEditor.getValue();
            const nombre = document.getElementById('nombre-programa').value || 'programa';
            console.log("Guardando c√≥digo:", nombre);
            alert(`C√≥digo "${nombre}" listo para guardar (funci√≥n por implementar)`);
        }

        function cargarCodigo() {
            console.log("Cargando c√≥digo...");
            alert("Funci√≥n de cargar c√≥digo por implementar");
        }

        // Funci√≥n para renderizar los resultados
        function renderCompilerResults(result) {
            // Actualizar estado
            const statusIndicator = document.getElementById('statusIndicator');
            if (result.success && result.errors.length === 0) {
                statusIndicator.className = 'status-indicator status-success';
                statusIndicator.innerHTML = '<div class="status-icon"></div><span>Compilaci√≥n Exitosa</span>';
            } else {
                statusIndicator.className = 'status-indicator status-error';
                statusIndicator.innerHTML = '<div class="status-icon"></div><span>Errores de Compilaci√≥n</span>';
            }

            // Actualizar resumen
            document.getElementById('totalProcesses').textContent = result.summary.totalProcesses;
            document.getElementById('totalProcessCalls').textContent = result.summary.totalProcessCalls;
            document.getElementById('totalVariables').textContent = result.summary.totalVariables;
            document.getElementById('totalErrors').textContent = result.summary.totalErrors;

            // Renderizar procesos
            const processList = document.getElementById('processList');
            if (result.processes && result.processes.length > 0) {
                processList.innerHTML = result.processes.map(process => `
                    <div class="process-item">
                        <div class="process-name">
                            <i>‚öôÔ∏è</i> ${process.name}
                        </div>
                        <div class="process-details">
                            <div><strong>Par√°metros:</strong> ${process.parameters.length}</div>
                            <div><strong>Instrucciones:</strong> ${process.bodyStatements}</div>
                            <div><strong>√Åmbito:</strong> ${process.scope}</div>
                            ${process.parameters.length > 0 ? `
                                <div class="param-list">
                                    ${process.parameters.map(param => `
                                        <div class="param-item">
                                            <span>${typeof param === 'string' ? param : param.name}</span>
                                            <span>${typeof param === 'object' ? param.type : 'numero'}</span>
                                        </div>
                                    `).join('')}
                                </div>
                            ` : ''}
                        </div>
                    </div>
                `).join('');
            } else {
                processList.innerHTML = '<div class="empty-state">No se declararon procesos</div>';
            }

            // Renderizar llamadas a procesos
            const processCallList = document.getElementById('processCallList');
            if (result.processCalls && result.processCalls.length > 0) {
                processCallList.innerHTML = result.processCalls.map(call => `
                    <div class="process-call-item ${call.isValid ? 'call-valid' : 'call-invalid'}">
                        <div>
                            <strong>${call.name}</strong>
                            <div class="process-details">
                                Par√°metros: [${call.parameters.join(', ')}]
                                ${call.line !== 'desconocida' ? ` ‚Ä¢ L√≠nea: ${call.line}` : ''}
                            </div>
                        </div>
                        <div class="valid-badge ${call.isValid ? 'valid-true' : 'valid-false'}">
                            ${call.isValid ? 'V√°lida' : 'Inv√°lida'}
                        </div>
                    </div>
                `).join('');
            } else {
                processCallList.innerHTML = '<div class="empty-state">No se realizaron llamadas a procesos</div>';
            }

            // Renderizar variables
            const variableList = document.getElementById('variableList');
            if (result.symbolTable && result.symbolTable.length > 0) {
                variableList.innerHTML = result.symbolTable.map(variable => `
                    <div class="variable-item">
                        <div class="variable-name">
                            <i>üìù</i> ${variable.name}
                        </div>
                        <div class="variable-details">
                            <div><strong>Tipo:</strong> ${variable.type}</div>
                            <div><strong>√Åmbito:</strong> ${variable.scope}</div>
                            <div><strong>Inicializada:</strong> ${variable.initialized ? 'S√≠' : 'No'}</div>
                        </div>
                    </div>
                `).join('');
            } else {
                variableList.innerHTML = '<div class="empty-state">No se declararon variables globales</div>';
            }

            // Renderizar √°reas
            const areaList = document.getElementById('areaList');
            if (result.executable.areas && result.executable.areas.length > 0) {
                areaList.innerHTML = result.executable.areas.map(area => `
                    <div class="area-item">
                        <div class="area-name">
                            <i>üó∫Ô∏è</i> ${area.name}
                        </div>
                        <div class="area-details">
                            <div><strong>Tipo:</strong> ${area.type}</div>
                            <div><strong>Dimensiones:</strong> ${area.dimensions.join(' x ')}</div>
                            <div><strong>L√≠mites:</strong> (${area.bounds.x1}, ${area.bounds.y1}) a (${area.bounds.x2}, ${area.bounds.y2})</div>
                        </div>
                    </div>
                `).join('');
            } else {
                areaList.innerHTML = '<div class="empty-state">No se declararon √°reas</div>';
            }

            // Renderizar errores
            const errorList = document.getElementById('errorList');
            if (result.errors && result.errors.length > 0) {
                errorList.innerHTML = result.errors.map(error => `
                    <div class="error-item">
                        <div class="error-message">${error}</div>
                    </div>
                `).join('');
            } else {
                errorList.innerHTML = '<div class="empty-state">No se encontraron errores</div>';
            }

            // Renderizar c√≥digo ejecutable
            const executableCode = document.getElementById('executableCode');
            if (result.executable) {
                executableCode.textContent = JSON.stringify(result.executable, null, 2);
            } else {
                executableCode.textContent = "No se gener√≥ c√≥digo ejecutable";
            }
        }

        // Funci√≥n para actualizar con nuevos resultados
        function updateCompilerResults(newResult) {
            renderCompilerResults(newResult);
        }

        // Inicializar cuando el DOM est√© listo
        document.addEventListener('DOMContentLoaded', function() {
            inicializarEditor();
            
            // Configurar toggle para c√≥digo ejecutable
            document.getElementById('toggleExecutable').addEventListener('click', function() {
                const codeBlock = document.getElementById('executableCode');
                const toggleButton = document.getElementById('toggleExecutable');
                
                if (codeBlock.classList.contains('hidden')) {
                    codeBlock.classList.remove('hidden');
                    toggleButton.innerHTML = '<span>Ocultar</span> <i>‚ñ≤</i>';
                } else {
                    codeBlock.classList.add('hidden');
                    toggleButton.innerHTML = '<span>Mostrar</span> <i>‚ñº</i>';
                }
            });
        });
    </script>
</body>
</html>